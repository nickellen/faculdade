USE teste;

CREATE TABLE livro(
	isbn char(13) PRIMARY KEY,
	nome varchar(256) NOT NULL,
	autor varchar(256) NOT NULL,
	genero varchar(256) NOT NULL
);


CREATE TABLE livro_log(
	isbn char(13) NOT NULL,
	nome varchar(256) NOT NULL,
	autor varchar(256) NOT NULL,
	genero varchar(256) NOT NULL
);

INSERT INTO livro VALUES("9788595084759", "A sociedade do Anel", "J.R.R. Tolkien", "Fantasia");

INSERT INTO livro VALUES("9788563560155", "Orgulho e preconceito", "Jane Austen", "Ficção Inglesa");

INSERT INTO livro VALUES("9788598078175", "A menina que roubava livros", "Markus Zusak", "Ficção");

INSERT INTO livro VALUES("9788532531216", "Todas as crônicas: Clarice Lispector", "Clarice Lispector", "Crônicas Brasileiras");

UPDATE livro set autor="Austen, Jane" WHERE isbn="9788563560155";

UPDATE livro set autor="Zusak, Markus" WHERE isbn="9788598078175";

UPDATE livro set genero="Literatura inglesa" WHERE nome="A sociedade do Anel";

DELETE FROM livro WHERE isbn = "9788598078175"; 

DROP table usuarios;

DROP trigger inserir_no_log;

SELECT * from livro_log;

CREATE TABLE log_on (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(255),
    horario TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE log_off (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(255),
    horario TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

USE teste;

CREATE TABLE controle_de_acesso (
  id              INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_conexao      INT UNSIGNED NOT NULL DEFAULT 0,
  user            VARCHAR(64) NOT NULL,
  login_ts        TIMESTAMP NULL DEFAULT NULL,
  logout_ts       TIMESTAMP NULL DEFAULT NULL,
  qtd_select      INT UNSIGNED NOT NULL DEFAULT 0
 );
